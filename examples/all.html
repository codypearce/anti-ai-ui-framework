<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>anti-ai-ui demo (All)</title>
    <style>
      body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji"; margin: 0; padding: 24px; color: #0f172a; }
      h1 { margin-top: 0; }
      h2 { margin: 8px 0 12px; }
      .split { display: grid; grid-template-columns: 1fr; gap: 24px; }
      @media (min-width: 1000px) { .split { grid-template-columns: 1fr 1fr; } }
      .panel { border: 1px solid #e2e8f0; border-radius: 10px; padding: 16px; }
      .card { border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px; margin-bottom: 20px; }
      .container { position: relative; height: 220px; border: 1px dashed #94a3b8; border-radius: 6px; margin-top: 12px; }
      .grid-host { margin-top: 12px; }
      button.demo { background: #3b82f6; color: #fff; border: 1px solid #0f172a; padding: 10px 14px; cursor: pointer; }
      input.demo { background: #fff; color: #0f172a; border: 1px solid #0f172a; padding: 8px 10px; border-radius: 6px; }
      .small { color: #475569; font-size: 12px; }
      a { color: #2563eb; }
    </style>
    <!-- Import maps for React ESM in the browser (used by React demos) -->
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18?dev",
          "react-dom/client": "https://esm.sh/react-dom@18/client?dev"
        }
      }
    </script>
  </head>
  <body>
    <h1>anti-ai-ui Demos (Vanilla + React)</h1>
    <p class="small">
      Tip: Run <code>npm run build</code> then <code>npm run demo</code> and open <code>http://localhost:4000/examples/all.html</code>.
      You can also open the individual pages: <a href="./index.html">vanilla</a> or <a href="./react.html">react</a>.
    </p>

    <div class="split">
      <div class="panel">
        <h2>Vanilla Examples</h2>

        <section class="card">
          <h3>RunawayButton (vanilla)</h3>
          <p>Try to click the button inside the box.</p>
          <div class="container" id="runaway-container">
            <button id="runaway" class="demo" type="button">Catch me</button>
          </div>
        </section>

        <section class="card">
          <h3>FakeDownloadGrid (vanilla)</h3>
          <div id="grid" class="grid-host"></div>
        </section>

        <section class="card">
          <h3>CookieHell (vanilla)</h3>
          <button id="open-cookie-hell" class="demo" type="button">Open CookieHell</button>
        </section>

        <section class="card">
          <h3>PopupChaos (vanilla)</h3>
          <button id="start-chaos" class="demo" type="button">Start Chaos</button>
        </section>

        <section class="card">
          <h3>PasswordHell (vanilla)</h3>
          <div id="password-hell"></div>
        </section>

        <section class="card">
          <h3>ShiftingInterface (vanilla)</h3>
          <div id="shifting-host" class="container"></div>
        </section>

        <section class="card">
          <h3>SemanticGaslighting (vanilla)</h3>
          <div id="gaslight"></div>
        </section>

        <section class="card">
          <h3>MitosisButton (vanilla)</h3>
          <p>Click the seed button; clones will appear. Only one is real.</p>
      <div class="container" id="mitosis-zone">
        <button id="mitosis-seed" class="demo" type="button">Click me</button>
      </div>
    </section>

    <section class="card">
      <h3>MarqueeInputs (vanilla)</h3>
      <p>Try typing while the inputs scroll. All clones sync the same value.</p>
      <div class="container" id="marquee-host"></div>
    </section>
      </div>

      <div class="panel">
        <h2>React Examples</h2>
        <div id="root"></div>
      </div>
    </div>

    <!-- Vanilla wiring -->
    <script type="module">
      import {
        makeButtonRunaway,
        makeFakeDownloadGrid,
        makeCookieHell,
        makePopupChaos,
        makePasswordHell,
        makeShiftingInterface,
        makeSemanticGaslighting,
        makeMitosisButton,
        makeMarqueeInputs,
      } from '../dist/vanilla/index.mjs';

      // Runaway button
      const container = document.getElementById('runaway-container');
      const btn = document.getElementById('runaway');
      if (container && btn) {
        makeButtonRunaway(btn, { container, speed: 1.2, evasionDistance: 140, jitter: 8 });
      }

      // Fake download grid
      const gridHost = document.getElementById('grid');
      if (gridHost) {
        makeFakeDownloadGrid(gridHost, {
          rows: 3,
          cols: 4,
          onRealClick: (i) => alert(`You found it at index ${i}!`),
          onFakeClick: () => console.log('Ad clicked'),
        });
      }

      // CookieHell
      const openBtn = document.getElementById('open-cookie-hell');
      if (openBtn) {
        openBtn.addEventListener('click', () => {
          makeCookieHell({ depth: 3, toggleCount: 4, rejectButtonSize: 10 });
        });
      }

      // PopupChaos
      const chaosBtn = document.getElementById('start-chaos');
      if (chaosBtn) {
        let chaosCleanup = null;
        chaosBtn.addEventListener('click', () => {
          if (chaosCleanup && typeof chaosCleanup.destroy === 'function') {
            chaosCleanup.destroy();
          }
          chaosCleanup = makePopupChaos({ popupCount: 5 });
        });
      }

      // PasswordHell
      const pwHost = document.getElementById('password-hell');
      if (pwHost) {
        makePasswordHell(pwHost, {
          requirementChangeInterval: 2500,
          onSubmit: () => alert('Password accepted (temporarily)!'),
        });
      }

      // ShiftingInterface
      const shiftingHost = document.getElementById('shifting-host');
      if (shiftingHost) {
        makeShiftingInterface(shiftingHost, {
          shiftInterval: 1200,
          duplicateChance: 0.25,
          colorChangeInterval: 1800,
        });
      }

      // SemanticGaslighting
      const gasHost = document.getElementById('gaslight');
      if (gasHost) {
        makeSemanticGaslighting(gasHost, {
          buttons: [
            { label: 'Submit', actualAction: 'cancel' },
            { label: 'Cancel', actualAction: 'submit' },
            { label: 'Help', actualAction: 'reset' },
          ],
          onSubmit: () => alert('Actually submitted!'),
          onCancel: () => alert('Actually cancelled!'),
          onReset: () => alert('Form reset!'),
        });
      }

      // MitosisButton
      const mitosisZone = document.getElementById('mitosis-zone');
      const mitosisSeed = document.getElementById('mitosis-seed');
      if (mitosisZone && mitosisSeed) {
        makeMitosisButton(mitosisSeed, {
          container: mitosisZone,
          maxClones: 6,
          decayMs: 6000,
          realIndexStrategy: 'rotate',
          onRealClick: () => alert('You clicked the real one!'),
          onFakeClick: () => console.log('Decoy clicked'),
        });
      }

      // MarqueeInputs (vanilla)
      const marqueeHost = document.getElementById('marquee-host');
      if (marqueeHost) {
        makeMarqueeInputs(marqueeHost, {
          count: 6,
          lanes: 2,
          speed: 140,
          direction: 'right',
          inputWidth: 160,
          className: 'demo',
          placeholder: 'Type your email while it moves…',
          onSubmit: (val) => alert(`Submitted: ${val}`),
        });
      }
    </script>

    <!-- React wiring -->
    <script type="module">
      import React from 'react';
      import { createRoot } from 'react-dom/client';
      import {
        RunawayButton,
        FakeDownloadGrid,
        CookieHell,
        PopupChaos,
        PasswordHell,
        ShiftingInterface,
        SemanticGaslighting,
        MitosisButton,
      } from '../dist/index.mjs';

      function Section({ title, children }) {
        return React.createElement('section', { className: 'card' }, [
          React.createElement('h3', { key: 'h3' }, title),
          React.createElement(React.Fragment, { key: 'c' }, children),
        ]);
      }

      function App() {
        const [showCookieHell, setShowCookieHell] = React.useState(false);
        const [showChaosKey, setShowChaosKey] = React.useState(0);

        return React.createElement(React.Fragment, null,
          React.createElement(Section, { title: 'RunawayButton (React)' },
            React.createElement('div', { className: 'container' },
              React.createElement(RunawayButton, { evasionDistance: 140, jitter: 8 }, 'Catch me')
            )
          ),

          React.createElement(Section, { title: 'FakeDownloadGrid (React)' },
            React.createElement(FakeDownloadGrid, {
              rows: 3,
              cols: 4,
              onRealClick: (i) => alert(`You found it at index ${i}!`),
              onFakeClick: () => console.log('Ad clicked'),
            })
          ),

          React.createElement(Section, { title: 'CookieHell (React)' }, [
            React.createElement('button', { key: 'btn', className: 'demo', onClick: () => setShowCookieHell(true) }, 'Open CookieHell'),
            showCookieHell && React.createElement(CookieHell, {
              key: 'cookie',
              depth: 3,
              toggleCount: 4,
              rejectButtonSize: 10,
              onClose: () => setShowCookieHell(false),
            })
          ]),

          React.createElement(Section, { title: 'PopupChaos (React)' }, [
            React.createElement('button', { key: 'btn', className: 'demo', onClick: () => setShowChaosKey((k) => k + 1) }, 'Start Chaos'),
            React.createElement(PopupChaos, { key: `chaos-${showChaosKey}`, popupCount: 5 })
          ]),

          React.createElement(Section, { title: 'PasswordHell (React)' },
            React.createElement(PasswordHell, { requirementChangeInterval: 2500, onSubmit: () => alert('Password accepted (temporarily)!') })
          ),

          React.createElement(Section, { title: 'ShiftingInterface (React)' },
            React.createElement(ShiftingInterface, { shiftInterval: 1200, duplicateChance: 0.25, colorChangeInterval: 1800 })
          ),

          React.createElement(Section, { title: 'SemanticGaslighting (React)' },
            React.createElement(SemanticGaslighting, {
              buttons: [
                { label: 'Submit', actualAction: 'cancel' },
                { label: 'Cancel', actualAction: 'submit' },
                { label: 'Help', actualAction: 'reset' },
              ],
              onSubmit: () => alert('Actually submitted!'),
              onCancel: () => alert('Actually cancelled!'),
              onReset: () => alert('Form reset!'),
            })
          ),

          React.createElement(Section, { title: 'MitosisButton (React)' },
            React.createElement('div', { className: 'container' },
              React.createElement(MitosisButton, {
                className: 'demo',
                maxClones: 8,
                initialClones: 7,
                shuffleIntervalMs: 400,
                realStartsRandom: true,
                decayMs: 6000,
                realIndexStrategy: 'random',
                onRealClick: () => alert('Lucky shot — the real one!'),
                onFakeClick: () => console.log('Decoy clicked'),
              }, 'Click me')
            )
          ),
        );
      }

      const root = createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    </script>
  </body>
  </html>
